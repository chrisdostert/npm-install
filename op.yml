name: github.com/opspec-pkgs/npm.install
description: runs npm install
inputs:
  srcDir:
    dir:
      default: .
      description: directory containing the src
  registry:
    string:
      constraints: { minLength: 1, format: uri }
      description: registry for npm to use during install
      isSecret: true
      default: https://registry.npmjs.org/
outputs:
  srcDir:
    dir:
      description: directory containing the src
run:
  container:
    cmd: [ npm, install]
    envVars:
      NPM_CONFIG_REGISTRY: $(registry)
    dirs:
      /src: srcDir
    image: { ref: 'node:7.7' }
    workDir: /src
